plugins {
    id 'org.sonarqube' version '3.5.0.2730'
    id 'java'
    id 'org.springframework.boot' version '2.7.18'
    id 'io.spring.dependency-management' version '1.1.4'
    id 'com.github.jk1.dependency-license-report' version '2.9'
}

licenseReport {
    outputDir = "$buildDir/reports/licenses"
    renderers = [
            new com.github.jk1.license.render.JsonReportRenderer(),
            new com.github.jk1.license.render.InventoryHtmlReportRenderer(),
            new com.github.jk1.license.render.CsvReportRenderer()
    ]
}


group = 'mykidong.mpva'
version = '1.0.0-SNAPSHOT'
java {
    sourceCompatibility = '17'
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
    maven { url "https://maven.egovframe.go.kr/maven/" } // egovframe maven 원격 저장소
}

ext {
    set('egovframeBootVersion', '4.3.0')
    set('log4j2.version', '2.23.1') // log4j 보안 패치
}

dependencies {
    implementation 'org.egovframe.cloud:module-common:4.3.0'
    implementation('org.egovframe.rte:org.egovframe.rte.fdl.cmmn:4.3.0') {
        exclude group: 'org.egovframe.rte', module: 'org.egovframe.rte.fdl.logging'
    }
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'

    // lombok
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // mapstruct.
    implementation 'org.mapstruct:mapstruct:1.5.5.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'

    // swagger open api via springdoc.
    implementation 'org.springdoc:springdoc-openapi-ui:1.6.15'

    // h2.
    runtimeOnly 'com.h2database:h2'
}

dependencyManagement {
    imports {
        mavenBom "org.egovframe.boot:org.egovframe.boot.starter.parent:${egovframeBootVersion}" // egovframe Boot Parent 설정
    }
}

test {
    useJUnitPlatform()
}

